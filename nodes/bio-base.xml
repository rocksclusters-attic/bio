<kickstart>
	<description>
	
	This contains some of the Bio Informatics Utilities

	</description>

	<changelog>
	$Log: bio-base.xml,v $
	Revision 1.61  2009/05/27 22:06:31  anoop
	Moved fftw to bio-req so that development machines will have it installed
	
	Revision 1.60  2009/05/22 06:57:43  anoop
	Bug fix, IoLib is required for bioperl-ext
	
	Revision 1.59  2009/02/19 18:45:58  anoop
	iolib and bioperl-ext to the mix
	
	Revision 1.58  2009/01/23 21:09:40  bruno
	change var tags to entities
	
	Revision 1.57  2008/12/09 20:03:52  anoop
	Solaris doesn't like '_' in the name
	
	Revision 1.56  2008/12/09 19:55:43  anoop
	Added the TIGR Assembler to the bio roll
	
	Revision 1.55  2008/11/26 21:37:35  anoop
	Merged back from changes in the mercurial repository
	
	Revision 1.54  2008/07/04 00:23:09  anoop
	*** empty log message ***
	
	Revision 1.53  2008/04/21 17:42:34  anoop
	Minor bug fix
	
	Revision 1.52  2008/04/04 18:31:18  anoop
	*** empty log message ***
	
	Revision 1.51  2007/07/30 18:44:45  anoop
	When changing Emboss to EMBOSS, make sure you catch all
	occurences of Emboss, not just a few selected ones.
	
	Revision 1.50  2007/06/15 23:27:15  mjk
	more perl stuff
	
	Revision 1.49  2007/05/10 20:25:19  anoop
	All the perl-something packages now changes to foundation-perl-something
	to avoid naming conflicts from people who would like to use the
	perl-something namespace.
	
	Revision 1.48  2006/12/18 20:23:47  anoop
	Bug Fix - PATH variable for EMBOSS was broken
	
	Now the perl files in ncbi use /opt/rocks/bin/perl rather than /usr/bin/perl or /usr/local/bin/perl
	
	Revision 1.47  2006/10/18 18:59:16  anoop
	*** empty log message ***
	
	Revision 1.46  2006/10/18 18:54:54  anoop
	*** empty log message ***
	
	Revision 1.45  2006/10/15 19:16:29  anoop
	*** empty log message ***
	
	Revision 1.44  2006/09/15 18:59:23  anoop
	Added gromacs and fftw to the Bioroll. Made appropriate changes to node files
	and documentation.
	
	Revision 1.43  2006/09/15 00:29:43  anoop
	Added gromacs and fftw to the bioroll
	
	Revision 1.42  2006/09/05 21:59:13  anoop
	Main change -
	
	Modifications to a lot of XML files. I apologize if people feel that I've
	stepped on someone else's toes here, but right now, the MANPATH variable is
	causing a bit of a headache and needs to be rethought. So all additions to
	the MANPATH variable are done via the /etc/man.config file.
	
	Please do not write shell scripts and profile.d files setting the MANPATH variable present
	as this would override the /etc/man.config file, and most man pages will not be
	available to you.
	
	Smaller changes -
	
	Refreshing packages in the xena roll. Development of xena halted for the next few weeks atleast
	Change the python version number that ganglia-python uses.
	Note added to NCBI Blast regarding upgrades in the future.
	
	Revision 1.41  2006/08/18 05:41:26  kst
	Bug fix in bio.csh: Don't choke if $MANPATH isn't already set.
	(Since bio.csh is early in the alphabet, it's one of the first
	scripts in /etc/profile.d that's executed, so this is likely to be
	a problem.)
	
	Revision 1.40  2006/08/08 18:38:48  anoop
	Perl Utilities Added
	
	Revision 1.39  2006/07/22 03:36:12  kst
	Corrected syntax errors in /etc/profile.d/bio.csh
	
	Revision 1.38  2006/07/20 15:55:03  anoop
	*** empty log message ***
	
	Revision 1.37  2006/07/17 18:06:27  anoop
	Upgraded Emboss to the latest stable version
	
	Revision 1.36  2006/07/13 18:02:51  anoop
	Cleaned up the code a bit.
	Build requirements have their own xml file
	ReportLab changed to reportlab to avoid naming conflicts
	reportlab is now added as a build requirement for biopython
	
	Revision 1.35  2006/07/12 22:02:53  anoop
	New NCBI Blast
	
	Revision 1.34  2006/07/12 20:46:09  anoop
	Moved user guide from compute nodes to frontend
	
	Revision 1.33  2006/05/25 21:14:52  anoop
	Bug fixed
	
	Revision 1.32  2006/05/25 21:14:05  anoop
	Added /share/bio to the /etc/auto.share
	
	Revision 1.31  2006/05/25 20:44:30  anoop
	Changed the export directory for the blast databases from /share/apps/bio
	to /share/bio
	
	Revision 1.30  2006/03/21 00:47:45  anoop
	Fixed 2 stupid bugs
	
	Revision 1.29  2006/03/20 22:07:10  anoop
	Fixed stupid syntax error
	
	Revision 1.28  2006/03/20 18:44:52  anoop
	Added a small script that acts as a wrapper for mpiformatdb. This is
	currently incorporated into the node xml file. I'd rather do it as a seperate
	entity where I can make all the changes that I want. However, since the script
	is rather small, its OK for the time being. Perhaps later it can be moved to
	its own container.
	
	Revision 1.27  2006/03/17 02:52:48  anoop
	More documentation added. Patched t_coffee to build and install correctly
	Modified node xml files to do a better job of configuration.
	
	Revision 1.26  2006/03/16 02:52:09  anoop
	Lots of changes to the roll
	
	Upgraded T_coffee
	modified mrbayes to work better
	modified phylip to work better
	upgraded fasta to install and work correctly
	Put in a little more documentation
	
	Revision 1.25  2006/03/09 22:06:05  anoop
	*** empty log message ***
	
	Revision 1.24  2006/03/03 21:34:06  anoop
	Made changes to the bio.sh and bio.csh files. Fixed a lot of environmental variables
	
	Revision 1.23  2006/03/02 18:51:11  anoop
	*** empty log message ***
	
	Revision 1.22  2006/03/02 17:49:32  anoop
	Modified the BLAST database location. Now shared location points to $HOME
	like the default NCBI configuration rather than replicating the databases
	across the nodes.
	
	Revision 1.21  2006/03/01 23:53:44  anoop
	Added Changelog to the xml file. Something that should have been done at the
	beginning of the roll. Oh Well!! What the heck!
	
	
	</changelog>
	
	<package os="linux">hmmer</package>
	<package os="linux">ncbi</package>
	<package os="linux">mpiblast</package>
	<package os="linux">biopython</package>
	<package os="linux">ReportLab</package>
	<package os="linux">clustalw</package>
	<package os="linux">mrbayes</package>
	<package os="linux">tcoffee</package>
	<package os="linux">EMBOSS</package>
	<package os="linux">phylip</package>
	<package os="linux">fasta</package>
	<package os="linux">glimmer</package>
	<package os="linux">gromacs</package>
	<package os="linux">gmap</package>
	<package os="linux">tigr</package>
	<package os="linux">iolib</package>

	<package os="linux">foundation-perl-bioperl</package>
	<package os="linux">foundation-perl-bioperl-run</package>
	<package os="linux">foundation-perl-bioperl-gui</package>
	<package os="linux">foundation-perl-bioperl-db</package>
	<package os="linux">foundation-perl-bioperl-ext</package>
	<package os="linux">foundation-perl-Data-Stag</package>
	<package os="linux">foundation-perl-Digest-MD5</package>
	<package os="linux">foundation-perl-File-Temp</package>
	<package os="linux">foundation-perl-GD</package>
	<package os="linux">foundation-perl-GD-SVG</package>
	<package os="linux">foundation-perl-Graph</package>
	<package os="linux">foundation-perl-HTML-Parser</package>
	<package os="linux">foundation-perl-HTML-Tagset</package>
	<package os="linux">foundation-perl-IO-String</package>
	<package os="linux">foundation-perl-IO-stringy</package>
	<package os="linux">foundation-perl-libnet</package>
	<package os="linux">foundation-perl-libwww-perl</package>
	<package os="linux">foundation-perl-MIME-Base64</package>
	<package os="linux">foundation-perl-PathTools</package>
	<package os="linux">foundation-perl-Scalar-List-Utils</package>
	<package os="linux">foundation-perl-SOAP-Lite</package>
	<package os="linux">foundation-perl-Storable</package>
	<package os="linux">foundation-perl-Text-Shellwords</package>
	<package os="linux">foundation-perl-Text-Iconv</package>
	<package os="linux">foundation-perl-URI</package>
	<package os="linux">foundation-perl-XML-DOM</package>
	<package os="linux">foundation-perl-XML-Node</package>
	<package os="linux">foundation-perl-XML-Parser</package>
	<package os="linux">foundation-perl-XML-Twig</package>
	<package os="linux">foundation-perl-XML-Writer</package>
	<package os="linux">foundation-perl-XML-Quote</package>

	<package os="sunos">ROCKShmmer</package>
	<package os="sunos">ROCKSncbi</package>
	<package os="sunos">ROCKSmpiblast</package>
	<package os="sunos">ROCKSbiopython</package>
	<package os="sunos">ROCKSReportLab</package>
	<package os="sunos">ROCKSmrbayes</package>
	<package os="sunos">ROCKStcoffee</package>
	<package os="sunos">ROCKSphylip</package>
	<package os="sunos">ROCKSfasta</package>
	<package os="sunos">ROCKSgromacs</package>
	<package os="sunos">ROCKSgmap</package>
	<package os="sunos">ROCKStigr</package>
<post>

<!--
	Common NCBI setup
 -->

<file name="/opt/Bio/ncbi/bin/.ncbirc" perm="0444">
[NCBI]
Data=/opt/Bio/ncbi/data/

[BLAST]
BLASTDB=/share/bio/ncbi/db/
BLASTMAT=/opt/Bio/ncbi/data/

[mpiBLAST]
Shared=/share/bio/ncbi/db/
Local=/opt/Bio/ncbi/db/
</file>

mkdir -p -m0777 /opt/Bio/ncbi/db/

<file name="/etc/man.config" mode="append">
MANPATH /opt/Bio/ncbi/doc/man/
MANPATH /opt/Bio/hmmer/man
MANPATH /opt/Bio/gromacs/man
</file>
<!--
	Create the login scripts
 -->

<file name="/etc/profile.d/bio.sh" perm="0755">
# Put the bin directories of all the applications into the path.
export BIOROLL=/opt/Bio

# NCBI Blast and MPI Blast
export PATH=$PATH:$BIOROLL/ncbi/bin:$BIOROLL/mpiblast/bin/

# HMMER
export PATH=$PATH:$BIOROLL/hmmer/bin

# EMBOSS
export PATH=$PATH:$BIOROLL/EMBOSS/bin

# ClustalW
export PATH=$PATH:$BIOROLL/clustalw/bin

# t_coffee
export PATH=$PATH:$BIOROLL/tcoffee/bin

# Phylip
export PATH=$PATH:$BIOROLL/phylip/exe

# Mr.Bayes
export PATH=$PATH:$BIOROLL/mrbayes

# fasta
export PATH=$PATH:$BIOROLL/fasta

# glimmer
export PATH=$PATH:$BIOROLL/glimmer/bin:/$BIOROLL/glimmer/scripts

# gromacs
export PATH=$PATH:$BIOROLL/gromacs/bin

# gmap
export PATH=$PATH:$BIOROLL/gmap/bin

# TIGR
export PATH=$PATH:$BIOROLL/tigr/bin

# NCBI
export BLASTDB=/share/bio/ncbi/db
export BLASTMAT=/opt/Bio/ncbi/data
export HMMER_DB=/share/bio/hmmer/db

# Create the ncbirc file as necessary
if [ ! -e $HOME/.ncbirc ]; then
cat &gt; $HOME/.ncbirc &lt;&lt; eof
[NCBI]
Data=/opt/Bio/ncbi/data/

[mpiBLAST]
Shared=/share/bio/ncbi/db/
Local=/opt/Bio/ncbi/db/

eof
fi

# Create a .t_coffee directory
if [ ! -e $HOME/.t_coffee/tmp/ ]; then
mkdir -p $HOME/.t_coffee/tmp/
fi
</file>

<file name="/etc/profile.d/bio.csh" perm="0755">
set path = ( $path /opt/Bio/ncbi/bin /opt/Bio/mpiblast/bin/ /opt/Bio/EMBOSS/bin /opt/Bio/clustalw/bin /opt/Bio/t_coffee/bin /opt/Bio/phylip/exe /opt/Bio/mrbayes /opt/Bio/fasta /opt/Bio/glimmer/bin /opt/Bio/glimmer/scripts /opt/Bio/gmap/bin /opt/Bio/gromacs/bin/ )

setenv BLASTDB  /share/bio/ncbi/db
setenv BLASTMAT /opt/Bio/ncbi/data
setenv HMMER_DB /share/bio/hmmer/db

if ( ! -e $HOME/.ncbirc ) then
cat &gt; $HOME/.ncbirc &lt;&lt; eof
[NCBI]
Data=/opt/Bio/ncbi/data/

[mpiBLAST]
Shared=/share/bio/ncbi/db/
Local=/opt/Bio/ncbi/db/

eof
endif

if ( ! -e $HOME/.t_coffee/tmp/ ) then
    mkdir -p $HOME/.t_coffee/tmp/
endif

</file>
</post>

<post os="linux">
<file name="/etc/ld.so.conf.d/bio.conf" perm="0444">
/opt/Bio/ncbi/lib/
/opt/Bio/EMBOSS/lib/
/opt/Bio/glimmer/lib/
/opt/Bio/gromacs/lib/
/opt/Bio/tigr/obj/
</file>
</post>

<post os="sunos">
crle -u -l /opt/Bio/ncbi/lib/
crle -u -l /opt/Bio/EMBOSS/lib/
crle -u -l /opt/Bio/gromacs/lib/
crle -u -l /opt/Bio/tigr/obj/
</post>

<!--
	This part is to write a wrapper to mpiblast's mpiformatdb.
	The way I do it is to move the original version to mpiformatdb.REAL
	and create an mpiformatdb file that calls the original and then changes permissions
	of the mbf file created by the command. This is necessary to allow everyone to 
	use the same databases.

mv /opt/Bio/mpiblast/bin/mpiformatdb /opt/Bio/mpiblast/bin/mpiformatdb.REAL

<file name="/opt/Bio/mpiblast/bin/mpiformatdb" perm="0755">
#!/bin/bash

args="$*"

sharedloc=`grep "Shared" ~/.ncbirc | cut -d= -f2`
mpiformatdb.REAL $*

dbname=""
while [ $1 ]; do
        if [ $1 == "-i" ]; then
                dbname=$2
                break
        else
                shift
        fi
done
echo "Changing permissions of $sharedloc/$dbname.mbf"
chmod a+w $sharedloc/$dbname.mbf
</file>
chmod 0755 /opt/Bio/mpiblast/bin/mpiformatdb
-->

<post>
<!-- Add /share/bio to the auto.share file -->
echo "bio &Kickstart_PrivateHostname;:/export/&amp;" &gt;&gt; /etc/auto.share
</post>
</kickstart>
